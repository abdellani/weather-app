(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{24:function(e,t,n){e.exports=n(40)},36:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(7),l=n.n(r),i=n(8),s=n(9),o=n(13),u=n(10),m=n(14),d=n(5),f=n(2),h=n(4),p=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={location:"stockholm"},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({location:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.sendQueries().then((function(e){return t.checkResponse(e)})).then((function(e){return e&&t.updateStore(e)}))}},{key:"sendQueries",value:function(){var e=this.state.location,t="https://api.openweathermap.org/data/2.5",n="d244c1a420bbb9c01c0c9d14d0126fe0",a="".concat(t,"/weather?q=").concat(e,"&units=").concat("metric","&APPID=").concat(n),c="".concat(t,"/").concat("forecast","?q=").concat(e,"&units=").concat("metric","&APPID=").concat(n);return Promise.all([this.sendQuery(a),this.sendQuery(c)])}},{key:"sendQuery",value:function(e){return fetch(e).then((function(e){return e.json()}))}},{key:"checkCurrentWeather",value:function(e){var t=e.main,n=e.wind,a=e.weather,c=e.sys,r=c.sunrise,l=c.sunset;r=new Date(1e3*r).toLocaleTimeString("en-GB").slice(0,5),l=new Date(1e3*l).toLocaleTimeString("en-GB").slice(0,5),n=n.speed,a=a[0].icon;var i=t.pressure,s=t.humidity,o=t.temp;return{weather:a,temp:o=o.toFixed(0),pressure:i=(i/1e3).toFixed(2),wind:n,humidity:s,sunrise:r,sunset:l}}},{key:"checkResponse",value:function(e){var t=e[0],n=t.cod;if(200===n){var a=this.checkCurrentWeather(t),c=e[1];if("200"===(n=c.cod)){var r=c.list,l=c.city,i=l.name,s=l.country,o=i,u=[];return r.slice(0,9).forEach((function(e){var t=e.main,n=e.dt_txt,a=e.wind,c=e.weather;c=c[0].icon,a=a.speed;var r=n.split(" ")[1].slice(0,-3),l=t.pressure,i=t.temp,s=t.humidity;l=(l/1e3).toFixed(2),i=i.toFixed(0),u.push({pressure:l,temp:i,humidity:s,time:r,wind:a,weather:c})})),{city:o,country:s,details:u,current:a}}}}},{key:"updateStore",value:function(e){this.props.add(e),this.setState({location:""})}},{key:"render",value:function(){var e=this,t=this.state.location;return c.a.createElement("div",{className:"form d-flex justify-content-center align-items-center m-4 p-4"},c.a.createElement("form",{className:"d-flex justify-content-center align-items-center"},c.a.createElement("input",{type:"text",className:"form-control",value:t,onChange:function(t){return e.handleChange(t)}}),c.a.createElement(f.a,{className:"button text-success mx-4",icon:h.d,onClick:function(t){return e.handleSubmit(t)}})))}}]),t}(a.Component),E=Object(d.b)(null,(function(e){return{add:function(t){e(function(e){return{type:"ADD",location:e}}(t))}}}))(p),v=n(22),y=n(12),b=function(e){var t=e.pressure,n=e.temp,a=e.humidity,r=e.time,l=e.wind,i=e.weather;return c.a.createElement("div",{className:"column d-flex flex-column align-items-center text-center px-1 py-1"},c.a.createElement("div",null,r),c.a.createElement("div",null,c.a.createElement("img",{src:"https://openweathermap.org/img/wn/".concat(i,"@2x.png"),alt:"Weather icon"})),c.a.createElement("div",{className:"temp"},n,"\xb0"),c.a.createElement("div",null,t,c.a.createElement("br",null),c.a.createElement("span",{className:"unit"},"mm")),c.a.createElement("div",null,l,c.a.createElement("br",null),c.a.createElement("span",{className:"unit"},"m/s")),c.a.createElement("div",null,a,c.a.createElement("br",null),c.a.createElement("span",{className:"unit"},"%")))},x=function(e){var t=e.weather,n=e.temp,a=e.pressure,r=e.wind,l=e.humidity,i=e.sunrise,s=e.sunset;return c.a.createElement("div",{className:"current-weather d-flex flex-column align-items-center my-4"},c.a.createElement("div",{className:"text-center"},(new Date).toLocaleString("en-GB",{month:"long",weekday:"long",day:"numeric"})),c.a.createElement("div",{className:"d-flex justify-content-around align-items-center"},c.a.createElement("div",null,c.a.createElement("img",{src:"https://openweathermap.org/img/wn/".concat(t,"@2x.png")})),c.a.createElement("div",{className:"temp mx-3"},n,"\xb0"),c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"d-flex flex-column pr-2"},c.a.createElement("div",null,c.a.createElement(f.a,{className:"pressure",icon:h.e})),c.a.createElement("div",null,c.a.createElement(f.a,{className:"wind",icon:h.c})),c.a.createElement("div",null,c.a.createElement(f.a,{className:"humidity",icon:y.a}))),c.a.createElement("div",{className:"d-flex flex-column"},c.a.createElement("div",null,a," mm"),c.a.createElement("div",null,r," m/s"),c.a.createElement("div",null,l," %")))),c.a.createElement("div",{className:"d-flex w-100 justify-content-around"},c.a.createElement("div",null,c.a.createElement(f.a,{className:"sun-icon",icon:h.b})," ",i),c.a.createElement("div",null,s," ",c.a.createElement(f.a,{className:"sun-icon",icon:h.a}))))},w=function(e){var t=e.city,n=e.country,a=e.details,r=e.removeItem,l=e.current;return c.a.createElement("div",{className:"bg-dark text-white card-container d-flex flex-column p-4 my-4"},c.a.createElement("div",{className:"d-flex  justify-content-between px-4"},c.a.createElement("div",null,"Weather in ",t,",",n),c.a.createElement("div",{className:" text-danger"},c.a.createElement(f.a,{icon:v.a,onClick:function(){return r()}}))),c.a.createElement(x,l),c.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},a.map((function(e,t){return c.a.createElement(b,Object.assign({key:t},e))}))))},g=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.removeItem;return c.a.createElement("div",{className:"d-flex flex-column align-items-center"},t&&t.map((function(e,t){return c.a.createElement(w,Object.assign({key:t},e,{removeItem:function(){return n(t)}}))})))}}]),t}(a.Component),N=Object(d.b)((function(e){return{locations:e.locations}}),(function(e){return{removeItem:function(t){return e(function(e){return{type:"DELETE",index:e}}(t))}}}))(g),j=(n(36),function(e){var t=e.url;return c.a.createElement("div",{id:"source-code-button"},c.a.createElement("a",{title:"Check source code on github",className:"btn btn-light border border-success ",href:t},c.a.createElement(f.a,{icon:y.b,alt:"source"})))});var k=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(j,{url:"https://github.com/abdellani/weather-app/"}),c.a.createElement(E,null),c.a.createElement(N,null))},O=(n(37),n(23)),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{locations:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return{locations:[].concat(Object(O.a)(e.locations),[t.location])};case"DELETE":return{locations:e.locations.filter((function(e,n){return t.index!==n}))};default:return e}},S=n(11),_=(n(20),n(38),n(39),Object(S.b)(D,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));l.a.render(c.a.createElement(d.a,{store:_},c.a.createElement(k,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.69c2e999.chunk.js.map